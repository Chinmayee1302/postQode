id: 5bd03393-9cb6-4ebb-9880-5584b4c10aa3
name: editReport
request:
  url:
    raw: >-
      {{API_Base_URL}}/interface/{{SYSTEM_ID}}//hospital/{{EquipmentManagement.hospitalDetails.hospitalId}}.srv/prosightAnalytics/scheduledReports
    host:
      - '{{API_Base_URL}}'
    path:
      - interface
      - '{{SYSTEM_ID}}'
      - hospital
      - '{{EquipmentManagement.hospitalDetails.hospitalId}}.srv'
      - prosightAnalytics
      - scheduledReports
  method: PUT
  headers:
    - key: sec-ch-ua-platform
      value: '"Windows"'
    - key: Authorization
      value: >-
        Bearer
        eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwcmoiOiI1NXptcEphMlE3dnlqdWxORjcySks2IiwiaWF0IjoxNzY1OTYxODI3LCJleHAiOjE3NjYwNDgyMjcsImF1ZCI6IkxvX2xuVXhGTDNadk1uRk41ZU1qRmlDVXYxeEZxRi1IIiwiaXNzIjoiaHR0cHM6Ly9kZXYtY294LWhlYWx0aC1pbWFnaW5lLWFwaS5sZXZlcmVnZS5jb20iLCJzdWIiOiI1a1hkbkNBbDk2aldxYWN5ZkZoZEhzIn0.iB2uxOnfgAYYrP2epYbQMn3SvZhJCquCcSftVBnq4d0
    - key: Referer
      value: https://dev-cognosos.web.app/
    - key: sec-ch-ua
      value: '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"'
    - key: sec-ch-ua-mobile
      value: '?0'
    - key: User-Agent
      value: >-
        Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,
        like Gecko) Chrome/143.0.0.0 Safari/537.36
    - key: Accept
      value: application/json
    - key: Content-Type
      value: application/json
  body:
    mode: raw
    modeOfBody: JSON
    raw: "{\r\n    \"id\": \"{{Reports.recurringReportId}}\",\r\n    \"form\": {\r\n        \"basicInformation\": {\r\n            \"type\": \"environment.smartReports.alerts\",\r\n            \"name\": \"alerts report postQodeUpdated\",\r\n            \"schedule\": \"recurring\",\r\n            \"disabled\": false\r\n        },\r\n        \"filters\": {\r\n            \"application\": \"environment\",\r\n            \"dateRange\": \"last1Month\",\r\n            \"department\": [\r\n                \"{{EquipmentManagement.departmentDetails.departmentID}}\"\r\n            ],\r\n            \"itemType\": [\r\n                \"{{EquipmentManagement.equipmentType}}\"\r\n            ],\r\n            \"itemTypeList\": [\r\n                {\r\n                    \"name\": \"{{EquipmentManagement.equipmentType}}\",\r\n                    \"value\": \"{{EquipmentManagement.equipmentType}}\",\r\n                    \"icon\": \"eq eq-default\"\r\n                }\r\n            ],\r\n            \"showCalendar\": false,\r\n            \"itemName\": [\r\n                \"{{EquipmentManagement.equipmentDetails.equipment3.equipmentId}}\"\r\n            ],\r\n            \"itemNamesList\": [],\r\n            \"dateRangeType\": \"RANGE_TYPES_BACKWARD\",\r\n            \"departmentLabel\": \"Assigned Owner\"\r\n        },\r\n        \"delivery\": {\r\n            \"application\": \"environment\",\r\n            \"sendWhen\": \"recurring\",\r\n            \"sendReportOn\": \"{{Reports.curtimestamp}}\",\r\n            \"sendReportAt\": \"{{Reports.curtimestamp}}\",\r\n            \"sendReportStartingOn\": \"{{Reports.startDate}}\",\r\n            \"sendReportStartingAt\": \"{{Reports.startDate}}\",\r\n            \"sendReportEndingOn\": \"{{Reports.endDate}}\",\r\n            \"sendReportFrequency\": \"daily\",\r\n            \"sendReportEndingOnMax\": \"{{Reports.endDate}}\",\r\n            \"dateTimeSelectMin\": \"{{curtimestamp}}\",\r\n            \"enableSendReportEndingOn\": true,\r\n            \"disabled\": false,\r\n            \"type\": \"environment.smartReports.alerts\"\r\n        },\r\n        \"data/itemType\": null,\r\n        \"data/itemName\": null,\r\n        \"recipients\": [\r\n            \"{{username}}\"\r\n        ]\r\n    },\r\n    \"config\": {\r\n        \"title\": \"Alerts Report\",\r\n        \"type\": \"environment.smartReports.alerts\",\r\n        \"dataType\": \"multipleImagine\",\r\n        \"carouselSelector\": \"itemNameValues\",\r\n        \"forwardDateDisable\": true,\r\n        \"interface\": [\r\n            {\r\n                \"path\": [\r\n                    [\r\n                        \"interface\",\r\n                        \"{systemId}\",\r\n                        \"hospital\"\r\n                    ],\r\n                    [\r\n                        \"obj\",\r\n                        \"{hospitalId}\"\r\n                    ],\r\n                    [\r\n                        \"srv\",\r\n                        \"prosightAnalytics\"\r\n                    ],\r\n                    [\r\n                        \"post\",\r\n                        \"scheduledReports/{type}/data\",\r\n                        {\r\n                            \"context\": \"{}\"\r\n                        }\r\n                    ]\r\n                ]\r\n            }\r\n        ],\r\n        \"accessors\": [\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Equip. Name\",\r\n                \"path\": \"equipmentName\",\r\n                \"dontDisplay\": true\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Equip. ID\",\r\n                \"path\": \"equipmentId\",\r\n                \"dontDisplay\": true\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Equi. Type\",\r\n                \"path\": \"equipmentType\",\r\n                \"dontDisplay\": true\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Department\",\r\n                \"path\": \"department\",\r\n                \"dontDisplay\": true\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Sensor ID\",\r\n                \"path\": \"sensorId\",\r\n                \"dontDisplay\": true\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Alert Type\",\r\n                \"path\": \"alertType\"\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Alert Status\",\r\n                \"path\": \"alertStatus\"\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Date/Time\",\r\n                \"path\": \"time\",\r\n                \"modifier\": [\r\n                    \"formatDate\",\r\n                    \"MM/dd/yyyy hh:mm a\"\r\n                ]\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Escalation Status\",\r\n                \"path\": \"escalationCount\"\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Performed By\",\r\n                \"path\": \"escalatedBy\"\r\n            },\r\n            {\r\n                \"type\": \"value\",\r\n                \"label\": \"Comments\",\r\n                \"path\": \"message\"\r\n            }\r\n        ],\r\n        \"form\": {\r\n            \"defaults\": {\r\n                \"basicInformation\": {\r\n                    \"type\": \"environment.smartReports.alerts\",\r\n                    \"schedule\": \"oneTime\"\r\n                },\r\n                \"filters\": {\r\n                    \"dateRange\": \"last7Days\"\r\n                }\r\n            },\r\n            \"useDateRangeDirection\": \"backward\",\r\n            \"useItemTypeFilter\": true,\r\n            \"useItemFilter\": true\r\n        }\r\n    },\r\n    \"context\": {\r\n        \"systemId\": \"{{SYSTEM_ID}}\",\r\n        \"hospitalId\": \"{{EquipmentManagement.hospitalDetails.hospitalId}}\",\r\n        \"type\": \"environment.smartReports.alerts\",\r\n        \"filters\": {\r\n            \"hospitalId\": \"{{EquipmentManagement.hospitalDetails.hospitalId}}\",\r\n            \"buildingIds\": [\r\n                \"{{EquipmentManagement.buildingDetails.buildingId}}\"\r\n            ],\r\n            \"departmentIds\": [\r\n                \"{{EquipmentManagement.departmentDetails.departmentID}}\"\r\n            ],\r\n            \"itemTypeValues\": [\r\n                \"{{EquipmentManagement.equipmentType}}\"\r\n            ],\r\n            \"itemNameValues\": [\r\n                \"{{EquipmentManagement.equipmentDetails.equipment3.equipmentId}}\"\r\n            ],\r\n            \"dateRange\": \"last1Month\"\r\n        },\r\n        \"offset\": 0,\r\n        \"limit\": 9999\r\n    },\r\n    \"updatedBy\": \"{{username}}\",\r\n    \"createdBy\": \"sai.vasudha^@cognosos.com\",\r\n    \"updatedAt\": \"{{Reports.curtimestamp}}\"\r\n}"
events:
  - listen: prerequest
    script:
      type: javascript
      exec:
        - "pq.environment.set(\"Reports.curtimestamp\", new Date().toISOString())\r"
        - "\r"
        - "pq.variables.set(\"Reports.startDate\", new Date().toISOString())\r"
        - "\r"
        - "pq.variables.set(\r"
        - "  \"Reports.endDate\",\r"
        - "  new Date(new Date().setDate(new Date().getDate() + 1)).toISOString()\r"
        - ");\r"
        - ''
type: request

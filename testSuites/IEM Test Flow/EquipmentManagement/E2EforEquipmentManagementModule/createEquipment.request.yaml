id: b4f1e5ca-8e07-4fa4-88c6-c9508032ee35
name: createEquipment
request:
  url:
    raw: >-
      {{API_Base_URL}}/interface/{{SYSTEM_ID}}/hospital/{{EquipmentManagement.hospitalDetails.hospitalId}}/equipment
    host:
      - '{{API_Base_URL}}'
    path:
      - interface
      - '{{SYSTEM_ID}}'
      - hospital
      - '{{EquipmentManagement.hospitalDetails.hospitalId}}'
      - equipment
  method: POST
  headers:
    - key: sec-ch-ua-platform
      value: '"Windows"'
    - key: Referer
      value: https://dev-cognosos.web.app/
    - key: sec-ch-ua
      value: '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"'
    - key: sec-ch-ua-mobile
      value: '?0'
    - key: User-Agent
      value: >-
        Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,
        like Gecko) Chrome/143.0.0.0 Safari/537.36
    - key: Accept
      value: application/json
    - key: Content-Type
      value: application/json
  body:
    mode: raw
    modeOfBody: JSON
    raw: "{\r\n    \"networkAliases\": {\r\n        \"equipment\": {\r\n            \"name\": \"{{SYSTEM_ID}}-{{EquipmentManagement.equipmentDetails.equipment1.name}}\",\r\n            \"deviceId\": \"{{SYSTEM_ID}}-{{EquipmentManagement.equipmentDetails.equipment1.id}}\"\r\n        }\r\n    },\r\n    \"networkId\": \"equipment\",\r\n    \"name\": \"{{EquipmentManagement.equipmentDetails.equipment1.name}}\",\r\n    \"data\": [\r\n        {\r\n            \"path\": \"equipmentType\",\r\n            \"value\": \"{{EquipmentManagement.equipmentType}}\"\r\n        },\r\n        {\r\n            \"path\": \"isRental\",\r\n            \"value\": \"{{EquipmentManagement.equipmentDetails.equipment1.isRental}}\"\r\n        },\r\n        {\r\n            \"path\": \"range/temperature/operatingMax\",\r\n            \"value\": \"{{EquipmentManagement.equipmentDetails.equipment1.operatingMax}}\"\r\n        },\r\n        {\r\n            \"path\": \"range/temperature/operatingMin\",\r\n            \"value\": \"{{EquipmentManagement.equipmentDetails.equipment1.operatingMin}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/building/id\",\r\n            \"value\": \"{{EquipmentManagement.buildingDetails.buildingId}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/building/name\",\r\n            \"value\": \"{{EquipmentManagement.buildingDetails.buildingName}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/floor/id\",\r\n            \"value\": \"{{EquipmentManagement.floorDetails.floorId}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/floor/name\",\r\n            \"value\": \"{{EquipmentManagement.floorDetails.floorName}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/department/id\",\r\n            \"value\": \"{{EquipmentManagement.departmentDetails.departmentID}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/department/name\",\r\n            \"value\": \"{{EquipmentManagement.departmentDetails.departmentName}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/room/id\",\r\n            \"value\": \"{{EquipmentManagement.roomDetails.roomId}}\"\r\n        },\r\n        {\r\n            \"path\": \"location/room/name\",\r\n            \"value\": \"{{EquipmentManagement.roomDetails.roomName_1}}\"\r\n        },\r\n        {\r\n            \"path\": \"name\",\r\n            \"value\": \"{{EquipmentManagement.equipmentDetails.equipment1.name}}\"\r\n        },\r\n        {\r\n            \"path\": \"equipmentId\",\r\n            \"value\": \"{{EquipmentManagement.equipmentDetails.equipment1.id}}\"\r\n        },\r\n        {\r\n            \"path\": \"associatedLocation/room/id\",\r\n            \"value\": null\r\n        },\r\n        {\r\n            \"path\": \"associatedLocation/room/name\",\r\n            \"value\": null\r\n        }\r\n    ]\r\n}"
  auth:
    type: bearer
    bearer:
      token: '{{idToken}}'
events:
  - listen: test
    script:
      type: javascript
      exec:
        - const response = pq.response.json();
        - ''
        - pq.test('Status code is 200', function () {
        - '    pq.response.to.have.status(200);'
        - '});'
        - ''
        - pq.test('Set equipmentId environment variable', function() {
        - '    pq.environment.set(''EquipmentManagement.equipmentDetails.equipment1.equipmentId'', response.id);'
        - '});'
type: request

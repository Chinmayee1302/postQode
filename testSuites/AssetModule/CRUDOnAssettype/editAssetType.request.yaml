id: a1e1f6d2-8dab-4e22-a1da-5432b96c59e9
name: editAssetType
request:
  url:
    raw: >-
      {{API_Base_URL}}/system/{{SYSTEM_ID}}/device/{{AssetManagement.hospitalDetails.HospitalId}}/srv/prosightBypass/resourceEnum
    host:
      - '{{API_Base_URL}}'
    path:
      - system
      - '{{SYSTEM_ID}}'
      - device
      - '{{AssetManagement.hospitalDetails.HospitalId}}'
      - srv
      - prosightBypass
      - resourceEnum
  method: PUT
  headers:
    - key: sec-ch-ua-platform
      value: '"Windows"'
    - key: Authorization
      value: >-
        Bearer
        eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwcmoiOiIwSDhFYW5RMEdlZmNPWVJqVjQ2d0w5IiwiaWF0IjoxNzY1Mjg4NTIzLCJleHAiOjE3NjUzNzQ5MjMsImF1ZCI6Ijk1NzhlMDQ2MGM5OGQ0YWRjMGY4N2Y3MCIsImlzcyI6Imh0dHBzOi8vc3RnLWNveC1oZWFsdGgtaW1hZ2luZS1hcGkubGV2ZXJlZ2UuY29tIiwic3ViIjoiMDJSWnVScTE0b1h5MWlwVGdXV3ZQNCJ9.vNnbElxeYGXAQe97PKUdO6Ntt17_ivv9wrAGI_jZDO0
    - key: Referer
      value: https://stg-cognosos.web.app/
    - key: sec-ch-ua
      value: '"Chromium";v="142", "Google Chrome";v="142", "Not_A Brand";v="99"'
    - key: sec-ch-ua-mobile
      value: '?0'
    - key: User-Agent
      value: >-
        Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,
        like Gecko) Chrome/142.0.0.0 Safari/537.36
    - key: Accept
      value: application/json
    - key: Content-Type
      value: application/json
  body:
    mode: raw
    modeOfBody: JSON
    raw: "{\r\n    \"resEnum\": {\r\n        \"name\": \"assetType\",\r\n        \"value\": \"{{AssetManagement.assetTypeDetails.assetTypeName}}\"\r\n    },\r\n    \"value\": {\r\n        \"name\": \"{{AssetManagement.assetTypeDetails.editedAssetTypeName}}\",\r\n        \"metadata/icon\": \"at at-biliblanket\"\r\n    }\r\n}"
  auth:
    type: bearer
    bearer:
      token: '{{idToken}}'
events:
  - listen: test
    script:
      type: javascript
      exec:
        - pq.test("Status code is 200", function () {
        - '    pq.response.to.have.status(200);'
        - '});'
        - pq.test("Validate Asset Type Update in Response", function () {
        - '    const responseData = pq.response.json();'
        - '    const editedAssetTypeName = pq.environment.get("AssetManagement.assetTypeDetails.editedAssetTypeName");'
        - ''
        - '    const updatedAsset = responseData.values.find(asset => asset.name === editedAssetTypeName);'
        - '    '
        - '    pq.expect(updatedAsset).to.not.be.null;'
        - '    pq.expect(updatedAsset.name).to.equal(editedAssetTypeName);'
        - '    pq.expect(updatedAsset.metadata.icon).to.equal("at at-biliblanket");'
        - '});'
type: request

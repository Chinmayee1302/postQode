id: 0db0a33a-852c-4abd-b66a-3e53d2bb1bc0
name: tagCreationAPI
request:
  url:
    raw: >-
      {{API_Base_URL}}/interface/{{SYSTEM_ID}}/hospital/{{AssetManagement.hopitalDetails.HospitalId}}/tags
    host:
      - '{{API_Base_URL}}'
    path:
      - interface
      - '{{SYSTEM_ID}}'
      - hospital
      - '{{AssetManagement.hopitalDetails.HospitalId}}'
      - tags
  method: POST
  headers: []
  body:
    mode: raw
    modeOfBody: JSON
    raw: "{\r\n  \"networkAliases\": {\r\n    \"hid-beacons\": {\r\n      \"deviceId\": \"{{AssetManagement.tagDetails.tag1.deviceId}}\"\r\n    }\r\n  },\r\n  \"networkId\": \"hid-beacons\",\r\n  \"data\": [\r\n    {\r\n      \"path\": \"uniqueDeviceId\",\r\n      \"value\": \"{{AssetManagement.tagDetails.tag1.deviceId}}\"\r\n    },\r\n    {\r\n      \"path\": \"type\",\r\n      \"value\": \"{{AssetManagement.tagDetails.tag1.type}}\"\r\n    },\r\n    {\r\n      \"path\": \"manufacturer\",\r\n      \"value\":  \"{{AssetManagement.tagDetails.tag1.manufacturer}}\"\r\n    },\r\n    {\r\n      \"path\": \"model\",\r\n      \"value\": \"{{AssetManagement.tagDetails.tag1.model}}\"\r\n    },\r\n    {\r\n      \"path\": \"tagType\",\r\n      \"value\": \"{{AssetManagement.tagDetails.tag1.model}}\"\r\n    },\r\n    {\r\n      \"path\": \"location\",\r\n      \"value\": {\r\n        \"floor\": {\r\n          \"name\": \"{{AssetManagement.floorDetails.floorName}}\",\r\n          \"id\": \"{{AssetManagement.floorDetails.floorId}}\"\r\n        },\r\n        \"department\": {\r\n          \"name\": \"{{AssetManagement.departmentName}}\",\r\n          \"id\": \"{{AssetManagement.departmentID}}\"\r\n        },\r\n        \"room\": {\r\n          \"name\": \"{{AssetManagement.locationDetails.roomName_1}}\",\r\n          \"id\": \"{{AssetManagement.locationDetails.room0}}\"\r\n        },\r\n        \"building\": {\r\n          \"name\": \"{{AssetManagement.buildingDetails.buildingName}}\",\r\n          \"id\": \"{{AssetManagement.buildingDetails.BuildingId}}\"\r\n        },\r\n        \"timestamp\": {{timestamp}}\r\n      }\r\n    },\r\n    {\r\n      \"path\": \"p\",\r\n      \"value\": {\r\n        \"floor\": {\r\n          \"name\": \"{{AssetManagement.floorDetails.floorName}}\",\r\n          \"id\": \"{{AssetManagement.floorDetails.floorId}}\"\r\n        },\r\n        \"department\": {\r\n          \"name\": \"{{AssetManagement.departmentName}}\",\r\n          \"id\": \"{{AssetManagement.departmentID}}\"\r\n        },\r\n        \"room\": {\r\n          \"name\": \"{{AssetManagement.locationDetails.roomName_1}}\",\r\n          \"id\": \"{{AssetManagement.locationDetails.room0}}\"\r\n        },\r\n        \"building\": {\r\n          \"name\": \"{{AssetManagement.buildingDetails.buildingName}}\",\r\n          \"id\": \"{{AssetManagement.buildingDetails.BuildingId}}\"\r\n        },\r\n        \"timestamp\": {{timestamp}}\r\n      }\r\n    },\r\n    {\r\n      \"path\": \"prevLocation\",\r\n      \"value\": {\r\n        \"floor\": {\r\n          \"name\": \"{{AssetManagement.floorDetails.floorName}}\",\r\n          \"id\": \"{{AssetManagement.floorDetails.floorId}}\"\r\n        },\r\n        \"department\": {\r\n          \"name\": \"{{AssetManagement.departmentName}}\",\r\n          \"id\": \"{{AssetManagement.departmentID}}\"\r\n        },\r\n        \"room\": {\r\n          \"name\": \"{{AssetManagement.locationDetails.roomName_2}}\",\r\n          \"id\": \"{{AssetManagement.locationDetails.room1}}\"\r\n        },\r\n        \"building\": {\r\n           \"name\": \"{{AssetManagement.buildingDetails.buildingName}}\",\r\n          \"id\": \"{{AssetManagement.buildingDetails.BuildingId}}\"\r\n        },\r\n        \"timestamp\": {{timestamp}}\r\n      }\r\n    }\r\n  ],\r\n  \"name\": \"{{AssetManagement.tagDetails.tag1.deviceId}}\"\r\n}\r\n"
  auth:
    type: bearer
    bearer:
      token: '{{idToken}}'
events:
  - listen: prerequest
    script:
      type: javascript
      exec:
        - pq.variables.set("timestamp", Date.now())
  - listen: test
    script:
      type: javascript
      exec:
        - const response=pq.response.json()
        - >-
          pq.test("Status code is 200", function () {
          pq.response.to.have.status(200); });
        - >-
          pq.environment.set("AssetManagement.tagDetails.tag1.tagID",
          response.id);
        - if (!pq.response.ok) {
        - '    console.log(pq.request.url);'
        - '}'
type: request


<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>PostQode Test Report - Admin Test Flow</title>
            <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2213.901%22%20viewBox%3D%220%200%2016%2013.901%22%3E%0A%20%20%3Cg%20id%3D%22Group_1686571129%22%20data-name%3D%22Group%201686571129%22%20transform%3D%22translate(-75%20-1.291)%22%3E%0A%20%20%20%20%3Cpath%20id%3D%22Path_93821%22%20data-name%3D%22Path%2093821%22%20d%3D%22M7.567%2C2.981c.126%2C0%2C.348.021.348.021h.008a4.147%2C4.147%2C0%2C0%2C1%2C3.96%2C3.706%2C4.192%2C4.192%2C0%2C0%2C1-.769%2C2.617L7.6%2C6.037l.015%2C4.207.614.58q-.154.015-.316.022a4.248%2C4.248%2C0%2C0%2C1-4-2.143v4.182a7.872%2C7.872%2C0%2C0%2C0%2C6.849.331l.711.671L16%2C13.9l-2.674-2.5a6.505%2C6.505%2C0%2C0%2C0%2C1.761-4.183c.046-2.38-1.267-6.735-7.162-7.2H7.916l-.168%2C0-.2%2C0L7.135.01H7.1A7.145%2C7.145%2C0%2C0%2C0%2C0%2C6.808v7.037H3.177V6.808A4.054%2C4.054%2C0%2C0%2C1%2C7.125%2C2.993l.154-.009s.162%2C0%2C.288%2C0%22%20transform%3D%22translate(75.001%201.29)%22%20fill%3D%22%23004d43%22%2F%3E%0A%20%20%20%20%3Crect%20id%3D%22Rectangle_302091%22%20data-name%3D%22Rectangle%20302091%22%20width%3D%2216%22%20height%3D%2213.901%22%20transform%3D%22translate(75%201.291)%22%20fill%3D%22none%22%2F%3E%0A%20%20%20%20%3Cpath%20id%3D%22Path_93822%22%20data-name%3D%22Path%2093822%22%20d%3D%22M103.087%2C86.022l-.015-4.207%2C8.4%2C7.865-4.523-.014Z%22%20transform%3D%22translate(-20.468%20-74.488)%22%20fill%3D%22%2327eaa6%22%2F%3E%0A%20%20%20%20%3Crect%20id%3D%22Rectangle_302092%22%20data-name%3D%22Rectangle%20302092%22%20width%3D%228.396%22%20height%3D%227.865%22%20transform%3D%22translate(82.604%207.327)%22%20fill%3D%22none%22%2F%3E%0A%20%20%20%20%3Crect%20id%3D%22Rectangle_302093%22%20data-name%3D%22Rectangle%20302093%22%20width%3D%2216%22%20height%3D%2213.901%22%20transform%3D%22translate(75%201.291)%22%20fill%3D%22none%22%2F%3E%0A%20%20%20%20%3Crect%20id%3D%22Rectangle_302094%22%20data-name%3D%22Rectangle%20302094%22%20width%3D%2216%22%20height%3D%2213.901%22%20transform%3D%22translate(75%201.291)%22%20fill%3D%22none%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E" />
        <style>
      /* Base styles */
      body {
        margin: 0;
        padding: 0;
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        font-size: 14px;
        line-height: 1.5;
        /* color: #333; */
        background-color: #ebf9f8;
      }

      .container {
        display: flex;
        height: 100vh;
        overflow: hidden;
      }

      /* Sidebar and splitter */
      .sidebar {
        width: 300px;
        min-width: 200px;
        overflow-x: hidden;
        max-width: 50%;
        background-color: #DEEDE7;
        border-right: 1px solid #dee2e6;
        overflow-y: auto;
        resize: horizontal;
      }

      .splitter {
        width: 4px;
        background: #dee2e6;
        cursor: col-resize;
        transition: background-color 0.2s;
      }

      .splitter:hover {
        background: #6c757d;
      }

      .main-content {
        flex: 1;
        overflow-y: auto;
      }

      #summaryPieChart {
        width: 10rem;
        height:7.5rem;
      }

/* Summary stats: compact, wrap if needed */

      /* Test tree */
      .test-tree {
        padding: 16px;
      }

      .test-group {
      }

      .test-group-header {
        display: flex;
        gap:0.5rem;
        align-items: center;
        padding: 5px;
        border-radius: 10px;
        cursor: pointer;
        user-select: none;
      }

      .test-group-header:hover {
        background: #f8f9fa;
      }

      .test-group-content {
        display: none;
        margin-left: 24px;
      }

      .test-group.expanded > .test-group-content {
        display: block;
      }

      .test-group-icon {
      }

      .test-group-name {
        font-weight: 500;
      }

      /* Test cases */
      .test-case {
        border-radius: 10px;
      }

      .test-case:hover {
        background-color: #f8f9fa;
      }

      .test-case-header {
      gap:0.5rem;
        display: flex;
        align-items: center;
        padding: 5px;
        border-radius: 10px;
        cursor: pointer;
      }

      .test-case-icon {
      }

      .test-case-name {
        flex: 1;
        font-weight: 500;
      }

      .test-case-duration {
        color: #6c757d;
        font-size: 12px;
      }

      .test-case-content {
        display: none;
        padding: 16px;
      }

      .test-case.expanded > .test-case-content {
        display: block;
      }

      /* Status colors */
      .test-case.passed .test-case-header {
        background: #e8f5e9;
        border-color: #c8e6c9;
      }

      .test-case.failed .test-case-header {
        background: #ffebee;
        border-color: #ffcdd2;
      }

      .test-case.skipped .test-case-header {
        background: #f3e5f5;
        border-color: #e1bee7;
      }

      /* Request sequence */
      .request-sequence {
        margin: 16px 0;
        padding: 16px;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid #6c757d;
      }

      .request-sequence-header {
        display: flex;
        align-items: center;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid #dee2e6;
      }

      .request-sequence-number {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 24px;
        height: 24px;
        margin-right: 12px;
        background: #6c757d;
        color: white;
        border-radius: 50%;
        font-size: 14px;
        font-weight: bold;
      }

      .request-url {
        flex: 1;
        margin: 0rem 1rem 0rem 0rem;
        font-family: monospace;
        text-decoration: underline;
        color: #0d47a1;
        word-break: break-all;
      }

      .request-method {
        display: inline-flex;
        align-items: center;
        padding: 4px 8px;

        border-radius: 4px;
        font-weight: bold;
        font-family: monospace;
      }

      .method-put {
        background: #e3f2fd;
        color: #0d47a1;
      }
      .method-get {
        background: #e8f5e9;
        color: #1b5e20;
      }
      .method-post {
        background: #fff3e0;
        color: #e65100;
      }
      .method-delete {
        background: #ffebee;
        color: #b71c1c;
      }
      .method-patch {
        background: #f3e5f5;
        color: #4a148c;
      }

      /* Headers and body sections */
      .headers-section,
      .body-section {
        margin-top: 16px;
      }

      .headers-table {
        width: 100%;
        border-collapse: collapse;
      }

      .headers-table tr:nth-child(even) {
        background: #f8f9fa;
      }

      .headers-table td {
        padding: 8px;
        border: 1px solid #dee2e6;
      }

      .header-name {
        width: 200px;
        font-weight: 500;
        font-family: monospace;
      }

      .header-value {
        font-family: monospace;
        word-break: break-all;
      }

      .body-content {
        padding: 12px;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        font-family: monospace;
        overflow-x: auto;
        white-space: pre-wrap;
      }

      /* Summary section */
.test-summary {
  background: #EBF9F8;
  border-radius: 4px;
  margin-bottom: 0;
  padding: 10px 10px 0 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.summary-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}

.stat {
  padding: 4px;
  background: #f8f9fa;
  border-radius: 4px;
  font-weight: 500;
  font-size: 0.98rem;
  min-width: 80px;
  text-align: center;
}

      .stat.passed {
        background: #e8f5e9;
        color: #1b5e20;
      }
      .stat.failed {
        background: #ffebee;
        color: #b71c1c;
      }
      .stat.skipped {
        background: gray;
        color: white;
      }
      .stat.aborted {
        background: #FEF3C7;
        color: #B45309;
      }

      .request-count {
        margin: 0 12px;
        padding: 2px 8px;
        background: #e9ecef;
        border-radius: 12px;
        font-size: 12px;
        color: #495057;
      }

      .response-status {
     
        border-radius: 4px;
        font-family: monospace;
        font-weight: 500;
      }

      .response-status.success {
        background: #e8f5e9;
        color: #1b5e20;
        padding:0.2rem;
      }

      .response-status.warning {
        background: #fff3e0;
        color: #e65100;
      }

      .response-status.skipped{
       background: gray;
        color: white;
      }

      .response-status.error {
        background: #ffebee;
        color: #b71c1c;
      }

      .response-time {
        margin-left: 8px;
        font-size: 12px;
        color: #6c757d;
      }

      /* Test Suite */
      .test-suite {
        margin: 8px 0;
      }

      .test-suite-header {
        display: flex;
        align-items: center;
        border-radius: 10px;
        margin-bottom: 8px;
      }

      .test-suite-icon {
        margin-right: 8px;
        font-size: 16px;
      }

      .test-suite-name {
      display: flex;
        font-weight: 600;
        font-size: 16px;
      }

      /* Request styles */
      .request-item {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        margin: 4px 0;
        background: #fff;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .request-item:hover {
        background: #f8f9fa;
      }

      .request-item.selected {
        background: #e3f2fd;
        border-color: #90caf9;
      }

      .request-item .request-method {
        margin-right: 8px;
      }

      .request-item .request-url {
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .request-item .response-status {
        margin-left: 8px;
      }

      /* Request details in main content */
      .request-details-view {
        background: #fff;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        margin-bottom: 16px;
      }

      .request-details-header {
        padding: 16px;
        background: #f8f9fa;
        border-bottom: 1px solid #dee2e6;
        cursor: pointer;
        user-select: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .request-details-header:hover {
        background: #e9ecef;
      }

      .request-details-content {
        padding: 16px;
        display: none;
      }

      .request-details-view.expanded .request-details-content {
        display: block;
      }

      .request-details-header .request-url {
        flex: 1;
        margin: 0;
        padding: 0;
        background: none;
      }

      .request-details-header .response-status {
        margin: 0;
      }

      /* Request list in main content */
      .request-list-container {
        background: #EBF9F8;
        border-radius: 4px;
        padding: 20px;
      }

      .request-list-container h3 {
        margin: 0 0 16px;
        padding-bottom: 8px;
        border-bottom: 1px solid #dee2e6;
      }

      .request-list-items {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .request-list-item {
        display: flex;
        align-items: center;
        padding: 12px;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .request-list-item:hover {
        background: #e9ecef;
        border-color: #adb5bd;
      }

      .request-list-item.selected {
        background: #e3f2fd;
        border-color: #90caf9;
      }

      .request-list-item .request-method {
        padding: 4px 8px;
        border-radius: 4px;

        font-weight: 600;
        text-align: center;
      }

      .request-list-item .request-name {
        flex: 1;
        font-weight: 500;
      }

      .request-status {
        color: black;
      }

      .request-list-item .request-status {
        margin-left: 12px;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: 500;
      }

      /* Request details container */
      .request-details-container {
        background: #fff;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 20px;
        margin-top: 20px;
      }

      .request-details-container h3 {
        margin: 0 0 16px;
        padding-bottom: 8px;
        border-bottom: 1px solid #dee2e6;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .request-details-container .back-button {
        padding: 6px 12px;
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        color: #495057;
        transition: all 0.2s;
      }

      .request-details-container .back-button:hover {
        background: #e9ecef;
        border-color: #adb5bd;
      }

      .pending {
       background: gray;
    color: white;
        padding: 0.2rem;
        border-radius: 4px;
      }

      .no-data {
        color: #6c757d;
        padding: 8px 0;
      }

      .error {
        color: #dc3545;
        padding: 0.2rem;
        background: #f8d7da;
        border-radius: 4px;
      }

      .headers {
        margin: 8px 0;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        overflow: hidden;
      }

      .header-item {
        display: flex;
        gap: 4rem;
        padding: 8px 12px;
        border-bottom: 1px solid #dee2e6;
      }

      .header-item:last-child {
        border-bottom: none;
      }

      .header-name {
        font-weight: 600;
        margin-right: 8px;
        color: #495057;
      }

      .header-value {
        color: #212529;
        word-break: break-all;
      }

      .body {
        margin: 8px 0;
      }

      /* .body pre {
        margin: 0;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 4px;
        overflow: auto;
      } */

      .body code {
        font-family: monospace;
        font-size: 14px;
        line-height: 1.4;
      }

      /* Test case selection */
      .test-case.selected .test-case-header {
        background: #e3f2fd;
        border-color: #90caf9;
      }

      .test-case.selected.passed .test-case-header {
        background: #c8e6c9;
        border-color: #81c784;
      }

      .test-case.selected.failed .test-case-header {
        background: #ffcdd2;
        border-color: #e57373;
      }

      .test-case.selected.skipped .test-case-header {
        background: #e1bee7;
        border-color: #ba68c8;
      }

      /* Search and filter styles */
      .search-container {
        padding: 5px;
        background: inherit;
        margin: 0rem 0.5rem 0.5rem 0.5rem;
        border-radius: 10px;
      }

      .search-box {
        position: relative;
        margin-bottom: 12px;
      }

      .search-box input {
        width: 80%;
        max-width:15rem;

        padding: 8px 32px 8px 12px;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        font-size: 14px;
        line-height: 1.5;
      }

      .search-box input:focus {
        outline: none;
        border-color: #90caf9;
        box-shadow: 0 0 0 2px rgba(144, 202, 249, 0.2);
      }

      .search-icon {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
        pointer-events: none;
      }

      .filter-options {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .filter-label {
        display: flex;
        align-items: center;
        gap: 4px;
        cursor: pointer;
      }

      .filter-text {
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 12px;
      }

      .filter-text.passed {
        background: #e8f5e9;
        color: #1b5e20;
      }
      .filter-text.failed {
        background: #ffebee;
        color: #b71c1c;
      }
      .filter-text.skipped {
        background: gray;
        color: white;
      }

      /* Hide filtered items */
      .test-case.filtered,
      .test-group.filtered {
        display: none;
      }

      .test-group.has-visible-children {
        display: block !important;
      }

      /* Tabs */
      .tab-buttons {
        display: flex;
        gap: 8px;
      }

      .tab-button {
        padding: 6px 12px;
        /* background: #2c2c2c; */
        border-bottom: 1px solid black;
        /* color: #ccc; */
        color: black;
        border: none;
        /* border-radius: 10px; */
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s;
      }

      .tab-button.active {
        /* background: #007acc; */
        border-bottom: 2px solid #007acc;
        /* color: #fff; */
      }

      .tab-pane {
        display: none;
      }

      .tab-pane.active {
        display: block;
      }

      /* Section Styling */
      .section {
        margin-bottom: 20px;
        background-color: #1c1c1c;
        padding: 12px 16px;
        border-radius: 6px;
        border: 1px solid #333;
      }

      .section-title {
        font-size: 14px;
        font-weight: 600;
        color: #ccc;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Badge */
      .badge {
        background-color: #444;
        color: #eee;
        padding: 2px 8px;
        font-size: 12px;
        border-radius: 10px;
      }

      /*  */
      /* .tab-buttons {
  display: flex;
  gap: 8px;
} */

      .primary-tabs {
      border:1px solid #dee2e6;
      }

      .secondary-tabs {
        margin: 0.5rem;
        border:1px solid #dee2e6;
      }

      /* .tab-button {
  padding: 6px 12px;
  background: #2a2a2a;
  color: #ccc;
  border: none;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: 0.2s ease;
} */

      /* .tab-button:hover {
  background: #3a3a3a;
}

.tab-button.active {
  background: #007acc;
  color: white;
} */

      .tab-pane,
      .inner-tab-pane {
        display: none;
      }

      .tab-pane.active,
      .inner-tab-pane.active {
        display: block;
      }

      .tab-pane-section {
        border-radius: 6px;
        padding: 0px 16px;
      }

      pre {
        /* background: #121212;
        padding: 10px;
        height: 200px;
        text-wrap: wrap;
        border-radius: 4px;
        overflow-x: auto;
        color: #c5c5c5; */
        background-color: #1e1e1e;
        color: #dcdcdc;
        padding: 1em;
        /* border-radius: 8px; */
        height: fit-content;
        max-height: 350px;
        overflow: auto;
        font-family: "Courier New", Courier, monospace;
        font-size: 0.95em;
        line-height: 1.5;
        margin-bottom: 1em;
        white-space: pre;
      }
      code {
        /* font-family: "Courier New", Courier, monospace;
        background-color: #f5f5f5;
        padding: 2px 4px; */
        text-wrap: wrap;
        /* border-radius: 4px;
        font-size: 0.95em;
        color: #d6336c;  */
      }
      /* pre code {
        background: none; 
        color: inherit;
        padding: 0;
      } */
      /* pre {
        background-color: #1e1e1e;
        color: #dcdcdc;
        padding: 1rem;
        border-radius: 8px;
        overflow-x: auto;
        font-family: "Courier New", Courier, monospace;
        font-size: 0.95rem;
        line-height: 1.4;
        white-space: pre-wrap;
      }

      pre code {
        color: inherit;
        background: none;
      } */

      .assertions {
          display: flex
;
    flex-direction: column;
    height: fit-content;
    gap: 8px;
    max-height: 350px;
    overflow: auto;
      }

      .assertion-item {
        border: 1px solid #ccc;
        border-left-width: 4px;
        padding: 10px;
        /* border-radius: 5px; */
        background: #fafafa;
      }

      .assertion-passed {
        border-left-color: #28a745;
        background-color: #e8f5e9;
        color: #1b5e20;
      }

      .assertion-failed {
        border-left-color: #dc3545;
        background-color: red;
        color: white;
      }

      .assertion-skipped {
        border-left-color: #ffc107;
        background-color: orange;
        color: black;
      }

      .assertion-header {
        display: flex;
        justify-content: space-between;
        font-weight: bold;
      }

      .assertion-error {
        margin-top: 6px;
          color: white;

        font-family: monospace;
      }

      /* Segregated Sections for Before Each, Main Test Steps, After Each */
      .before-each-responses,
      .after-each-responses,
      .main-test-steps {
        margin-bottom: 24px;
        border-radius: 8px;
        padding: 16px;
        background-color: #ffffff;
        border: 1px solid #dee2e6;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03);
      }

      /* Section headers */
      .before-each-responses .section-title,
      .after-each-responses .section-title,
      .main-test-steps .section-title {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 12px;
        color: #333;
        padding-left: 4px;
        border-left: 4px solid #007acc;
      }

      /* Distinct colors for each section */
      .before-each-responses .section-title {
        border-color: #1b5e20; /* green */
      }

      .main-test-steps .section-title {
        border-color: #007acc; /* blue */
      }

      .after-each-responses .section-title {
        border-color: #b71c1c; /* red */
      }
      /* Accordion content initially hidden */
      .accordion-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
      }

      /* Accordion content when open */
      .accordion-content.open {
        max-height: fit-content; /* or use scrollHeight via JS for dynamic height */
      }

      /* Optional: Styling for the arrow */
      .accordion-toggle {
      display:flex;
      gap:0.5rem;
      
        cursor: pointer;
        font-weight: bold;
        padding: 8px;
        background-color: #004D4314;
        border-radius: 4px;
        margin-top: 8px;
      }

      .accordion-toggle .arrow {
        display: inline-block;
        padding-top:0.2rem;
        transition: transform 0.3s ease;
      }

      /* Request list items */
      .request-list-item {
        cursor: pointer;
        padding: 6px 10px;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      /* Request detail styling */
      .request-details-view {
        display: none;
        background-color: #f9f9f9;
        border-left: 3px solid #004D43;
        border-radius: 4px;
      }

      /* When expanded */
      .request-details-view.expanded {
        display: block;
      }

      /* --- standalone iteration responses --- */
.iteration-container {
  background: #fff;
  overflow: hidden;
}
.iteration-toggle {
  width: 100%;
  background: #DEEDE7;
  border: none;
  padding: 5px;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 14px;
  border-radius: 8px;
  font-weight: 500;
  cursor: pointer;
  position: relative;
  user-select: none;
  transition: background 0.15s ease;
}
.iteration-toggle:hover,
.iteration-toggle:focus {
 background-color: #f8f9fa;
  outline: none;
}
.iteration-children {
padding-left:20px;

  display: block;
  background-color:#DEEDE7;
  animation: expand 0.2s ease-out forwards;
}
.iteration-container.open .iteration-children {
  display: block;
  border: none;
}
.iteration-toggle .badge {
  border-radius: 999px;
  padding: 2px 8px;
  margin-left: auto;
  font-weight: 500;
  color: #555;
}
.iteration-toggle:focus-visible {
  box-shadow: 0 0 0 3px rgba(100, 149, 237, 0.5);
  border-radius: 6px;
}

/* --- group-nested iteration responses --- */
.group-iteration-container {
  overflow: hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}
.group-iteration-toggle {
  width: 100%;
  background: #DEEDE7;
  padding: 5px;
  display: flex;
  align-items: center;
  border-radius: 8px;
  gap: 0.5rem;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  position: relative;
  user-select: none;
  transition: background 0.15s ease;
}
.group-iteration-toggle:hover,
.group-iteration-toggle:focus {
 background-color: #DEEDE7;
  outline: none;
}
.group-iteration-children {
padding-left:20px;
background-color:#DEEDE7;
  display: block;
  animation: expand 0.2s ease-out forwards;
}
.group-iteration-container.open .group-iteration-children {
  display: block;
  
}
.group-iteration-toggle .badge {
  background: #f1f3f5;
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 0.65rem;
  margin-left: auto;
  font-weight: 500;
  color: #555;
}
.group-iteration-toggle:focus-visible {
  border-radius: 6px;
}

 .postqode-logo {
    display: flex
;
    flex-direction: row;
    justify-content: center;
    width: auto;
    padding: 2rem 0rem 1rem 4rem;
    min-width: 3rem;
    max-width: 10rem;        
            }
            .postqode-logo svg {
                width: 100%;
                height: 100%;
                
            }

            .test-case-hook-icon{
            padding-top:0.3rem;
            }

            scrollable-content {
  flex: 1 1 auto;
  overflow-y: auto;
  min-height: 0;
  padding-top: 10px;
}

/* --- Responsive tweaks --- */
@media (max-width: 600px) {
  .test-summary {
    padding: 6px 2px 0 2px;
  }
  .summary-pie-container {
    width: 100%;
    min-width: 120px;
  }
  .stat {
    min-width: 60px;
    font-size: 0.9rem;
    padding: 4px 6px;
  }
}

/* --- Hide scrollbars for a cleaner look --- */
.scrollable-content::-webkit-scrollbar {
  width: 8px;
  background: #f7fafc;
}
.scrollable-content::-webkit-scrollbar-thumb {
  background: #e0e0e0;
  border-radius: 4px;
}

/* --- End Pie Chart and Summary Styling --- */

.test-summary-accordion {
  background: #DEEDE7;
  border-radius: 4px;
  margin-bottom: 0;
  position: sticky;
  top: 0;
  z-index: 10;
}
.test-summary-header {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 10px;
  user-select: none;
}
.accordion-arrow {
  font-size: 1.2rem;
  margin-right: 10px;
  transition: transform 0.2s;
}
.test-summary-content {
  padding: 0 10px 10px 10px;
  transition: max-height 0.2s;
}

.scrollable-content {
  flex: 1 1 auto;
  overflow-y: auto;
  min-height: 0;
}
.request-name{
  font-weight: bold;
  max-width:fit-content;
  margin: 0rem 1rem;
}
  .test-name{
  font-weight: bold;
  max-width:fit-content;
  margin: 0rem 1rem;
}

     #summaryChartLegend ul {
                        list-style: none;
                        padding: 0;
                        margin: 0;
                    }
                    #summaryChartLegend li {
                        display: flex;
                        
                        margin-bottom: 5px;
                        font-size: 14px;
                    }
                    #summaryChartLegend li span {
                        display: inline-block;
                        width: 14px;
                        height: 14px;
                        margin: 4px;
                    }
                    .summary-pie-container {
                        display: flex;
                       
                        gap: 1rem;
                        justify-content: center;
                    }

/* Shared expand animation */
@keyframes expand {
  from {
    opacity: 0;
    transform: translateY(-2px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
  .headers-table {
  width: 100%;
  border-collapse: collapse;
  height: fit-content;
  max-height: 350px;
  overflow: auto;
  margin: 8px 0;
  border: 1px solid #dee2e6;
  border-radius: 4px;
}
.headers-table-wrapper {
  max-height: 350px;   /* prevents infinite vertical growth */
  overflow: auto;      /* allows both vertical & horizontal scroll */
}

.headers-table th,
.headers-table td {
  padding: 8px 12px;
  border: 1px solid #dee2e6;
  text-align: left;
}

.headers-table th {
  background: #f8f9fa;
  font-weight: 600;
  color: #495057;
}

.header-name {
  font-weight: 600;
}

.header-value {
  word-break: break-all;
  color: #212529;
}

.body pre {
  padding: 8px;
  border-radius: 4px;
  overflow: auto;
}

.binary-data {
  font-style: italic;
  color: #6c757d;
}

.graphql-section {
  margin-bottom: 12px;
}

.section-title {
  font-weight: bold;
  margin-bottom: 4px;
  color: #343a40;
}

.body.image-body {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 12px;
  background: #f8f9fa; /* subtle light background */
  border: 1px solid #dee2e6;
  border-radius: 4px;
}

.body.image-body img {
  max-width: 100%;
  max-height: 400px; /* keeps huge images from overflowing */
  border-radius: 4px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  object-fit: contain; /* keeps aspect ratio */
}
    </style>
                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="sidebar">
                <div class="postqode-logo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="243.135" height="33.704" viewBox="0 0 243.135 33.704">
                    <g id="Group_1686571131" data-name="Group 1686571131" transform="translate(-203.622 -145.513)">
                        <g id="Group_1686571063" data-name="Group 1686571063" transform="translate(248.555 145.513)">
                        <path id="Path_93812" data-name="Path 93812" d="M-69.954,9.027V-21.707H-57.97a12.358,12.358,0,0,1,5.961,1.33A9.132,9.132,0,0,1-48.265-16.7a10.956,10.956,0,0,1,1.289,5.373,10.744,10.744,0,0,1-1.31,5.373,9.115,9.115,0,0,1-3.806,3.63,12.816,12.816,0,0,1-6.023,1.31h-5.549V9.027Zm6.291-15.119h4.538a5.616,5.616,0,0,0,4.27-1.464,5.277,5.277,0,0,0,1.382-3.775,5.16,5.16,0,0,0-1.382-3.754,5.744,5.744,0,0,0-4.29-1.423h-4.517Zm30.9,15.573a11.608,11.608,0,0,1-6-1.5,10.071,10.071,0,0,1-3.909-4.167A13.435,13.435,0,0,1-44.046-2.4a13.546,13.546,0,0,1,1.372-6.25,10.056,10.056,0,0,1,3.909-4.177,11.608,11.608,0,0,1,6-1.5,11.608,11.608,0,0,1,6,1.5A10.056,10.056,0,0,1-22.853-8.65,13.546,13.546,0,0,1-21.481-2.4a13.435,13.435,0,0,1-1.372,6.219,10.071,10.071,0,0,1-3.909,4.167A11.608,11.608,0,0,1-32.764,9.481Zm0-4.868a4.128,4.128,0,0,0,3.733-2,9.294,9.294,0,0,0,1.258-5.033A9.282,9.282,0,0,0-29.03-7.464a4.133,4.133,0,0,0-3.733-1.99,4.109,4.109,0,0,0-3.723,1.99,9.342,9.342,0,0,0-1.248,5.043,9.354,9.354,0,0,0,1.248,5.033A4.1,4.1,0,0,0-32.764,4.613ZM-8.012,9.481a12.333,12.333,0,0,1-6.879-1.774A7.327,7.327,0,0,1-18.2,2.715l5.755-.99q.887,3.218,4.62,3.218a5.047,5.047,0,0,0,2.795-.67,1.983,1.983,0,0,0,1.021-1.7Q-4.01.818-6.98.2l-3.981-.825Q-17.6-1.987-17.6-7.165A6.116,6.116,0,0,1-14.942-12.4a11.769,11.769,0,0,1,7.034-1.918A11.374,11.374,0,0,1-1.37-12.651,7.213,7.213,0,0,1,1.7-8.175l-5.487.969A3.812,3.812,0,0,0-5.145-9.135a4.327,4.327,0,0,0-2.681-.753,4.71,4.71,0,0,0-2.558.65,1.933,1.933,0,0,0-1.031,1.681,1.92,1.92,0,0,0,.67,1.475,4.932,4.932,0,0,0,2.3.939l4.146.825Q2.3-2.978,2.3,1.911A6.293,6.293,0,0,1,.982,5.882,8.6,8.6,0,0,1-2.669,8.532,14.078,14.078,0,0,1-8.012,9.481ZM17.937-14.033V-9.31H13.626V2.282a1.878,1.878,0,0,0,2.1,2.145,7.176,7.176,0,0,0,.98-.093q.629-.093.98-.175L18.576,8.8a12.276,12.276,0,0,1-2.052.433,16.22,16.22,0,0,1-1.949.124,7.582,7.582,0,0,1-5.3-1.681A6.256,6.256,0,0,1,7.438,2.819V-9.31H4.261v-4.724H7.438V-19.52h6.188v5.487ZM35.593,9.44a14.473,14.473,0,0,1-7.312-1.856A13.209,13.209,0,0,1,23.145,2.2a17.839,17.839,0,0,1-1.887-8.519,17.949,17.949,0,0,1,1.887-8.55,13.194,13.194,0,0,1,5.136-5.394,14.473,14.473,0,0,1,7.312-1.856,14.457,14.457,0,0,1,7.322,1.856,13.214,13.214,0,0,1,5.126,5.394,17.948,17.948,0,0,1,1.887,8.55A18.629,18.629,0,0,1,48.64.869,14.1,14.1,0,0,1,45.123,6l4.435,5.59H43.679L41.142,8.429A14.964,14.964,0,0,1,35.593,9.44ZM33.654-1.534h5.384l2.228,2.867a8.826,8.826,0,0,0,1.681-3.207,15.268,15.268,0,0,0,.588-4.445q0-4.971-2.176-7.591a7.122,7.122,0,0,0-5.765-2.62,7.118,7.118,0,0,0-5.755,2.63q-2.186,2.63-2.186,7.58,0,4.93,2.186,7.549a7.129,7.129,0,0,0,5.755,2.62,8.318,8.318,0,0,0,1.98-.227ZM65.089,9.481a11.608,11.608,0,0,1-6-1.5,10.071,10.071,0,0,1-3.909-4.167A13.435,13.435,0,0,1,53.807-2.4a13.546,13.546,0,0,1,1.372-6.25,10.056,10.056,0,0,1,3.909-4.177,11.608,11.608,0,0,1,6-1.5,11.608,11.608,0,0,1,6,1.5A10.056,10.056,0,0,1,75-8.65,13.546,13.546,0,0,1,76.372-2.4,13.435,13.435,0,0,1,75,3.819a10.071,10.071,0,0,1-3.909,4.167A11.608,11.608,0,0,1,65.089,9.481Zm0-4.868a4.128,4.128,0,0,0,3.733-2,9.294,9.294,0,0,0,1.258-5.033,9.282,9.282,0,0,0-1.258-5.043,4.133,4.133,0,0,0-3.733-1.99,4.109,4.109,0,0,0-3.723,1.99,9.342,9.342,0,0,0-1.248,5.043,9.354,9.354,0,0,0,1.248,5.033A4.1,4.1,0,0,0,65.089,4.613Zm24.03,4.806a8.632,8.632,0,0,1-4.785-1.372,9.4,9.4,0,0,1-3.372-4.022,15.162,15.162,0,0,1-1.248-6.487,15.046,15.046,0,0,1,1.279-6.58A9.25,9.25,0,0,1,84.4-13a8.7,8.7,0,0,1,4.682-1.32,7.162,7.162,0,0,1,3.259.66,6.406,6.406,0,0,1,2.094,1.63,8.666,8.666,0,0,1,1.207,1.877h.206V-21.707h6.188V9.027H95.947V5.335h-.309A8.276,8.276,0,0,1,94.4,7.2,6.5,6.5,0,0,1,92.3,8.78,7.147,7.147,0,0,1,89.119,9.419Zm1.9-4.971a4.174,4.174,0,0,0,3.651-1.9,8.756,8.756,0,0,0,1.3-5.033,8.708,8.708,0,0,0-1.289-5.012,4.181,4.181,0,0,0-3.661-1.877,4.13,4.13,0,0,0-3.692,1.929,8.924,8.924,0,0,0-1.258,4.961,8.961,8.961,0,0,0,1.269,4.992A4.13,4.13,0,0,0,91.017,4.448Zm26.712,5.033a12.183,12.183,0,0,1-6.085-1.444,9.718,9.718,0,0,1-3.929-4.1,13.61,13.61,0,0,1-1.372-6.312,13.546,13.546,0,0,1,1.372-6.25,10.23,10.23,0,0,1,3.857-4.187,11.066,11.066,0,0,1,5.848-1.506,11.65,11.65,0,0,1,5.466,1.279,9.435,9.435,0,0,1,3.909,3.878,13.26,13.26,0,0,1,1.454,6.539V-.894H112.469a6.07,6.07,0,0,0,1.568,4.27,5.175,5.175,0,0,0,3.8,1.444,5.384,5.384,0,0,0,2.795-.691,3.816,3.816,0,0,0,1.66-2.032l5.61,1.052a8.124,8.124,0,0,1-3.5,4.6A11.959,11.959,0,0,1,117.729,9.481ZM112.51-4.772h9.777a5.989,5.989,0,0,0-1.444-3.568,4.346,4.346,0,0,0-3.362-1.32,4.56,4.56,0,0,0-3.507,1.372A5.709,5.709,0,0,0,112.51-4.772Z" transform="translate(69.954 22.119)"/>
                        </g>
                        <g id="Group_1686571129" data-name="Group 1686571129" transform="translate(203.622 145.513)">
                        <path id="Path_93821" data-name="Path 93821" d="M17.71,6.974c.3,0,.815.05.815.05h.018C21.4,7.207,27.214,9.19,27.81,15.7a9.81,9.81,0,0,1-1.8,6.125l-8.215-7.7.035,9.846,1.436,1.357q-.361.034-.74.052a9.942,9.942,0,0,1-9.36-5.016v9.787a18.422,18.422,0,0,0,16.029.776L26.857,32.5l10.584.033L31.185,26.67a15.223,15.223,0,0,0,4.12-9.789c.107-5.57-2.965-15.762-16.76-16.857l-.02,0S18.28.015,18.131.011L17.669,0,16.7.023h-.084C11.4.14.916,3.468,0,15.931V32.4H7.437V15.931C7.486,13.271,9.4,7.765,16.676,7l.359-.022s.379-.01.675-.007" transform="translate(0.001 -0.001)" fill="#004d43"/>
                        <rect id="Rectangle_302091" data-name="Rectangle 302091" width="37.442" height="32.53" transform="translate(0 0)" fill="none"/>
                        <path id="Path_93822" data-name="Path 93822" d="M103.107,91.66l-.035-9.846,19.647,18.4-10.584-.033Z" transform="translate(-85.277 -67.689)" fill="#27eaa6"/>
                        <rect id="Rectangle_302092" data-name="Rectangle 302092" width="19.647" height="18.405" transform="translate(17.796 14.125)" fill="none"/>
                        <rect id="Rectangle_302093" data-name="Rectangle 302093" width="37.442" height="32.53" transform="translate(0 0)" fill="none"/>
                        <rect id="Rectangle_302094" data-name="Rectangle 302094" width="37.442" height="32.53" transform="translate(0 0)" fill="none"/>
                        </g>
                    </g>
                    </svg>
                </div>
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search... ðŸ” " />
                    </div>
                    <div class="filter-options">
                        <label class="filter-label">
                            <input type="checkbox" id="filterPassed" checked />
                            <span class="filter-text passed">Passed</span>
                        </label>
                        <label class="filter-label">
                            <input type="checkbox" id="filterFailed" checked />
                            <span class="filter-text failed">Failed</span>
                        </label>
                        <label class="filter-label">
                            <input type="checkbox" id="filterSkipped" checked />
                            <span class="filter-text skipped">Skipped</span>
                        </label>
                    </div>
                </div>
                <div class="test-tree">
                    <div class="test-suite">
                        <div class="test-suite-header">                                        
                            <span class="test-suite-name"> <span class="test-suite-icon"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <rect x="1" y="1" width="22" height="22" rx="3" stroke="#b088e3" fill="none"/>
  <text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" font-size="12" font-family="Arial, sans-serif" fill="#b088e3" font-weight="bold">TS</text>
</svg></span> Admin Test Flow</span>
                            </div>
                        <div class="test-suite-content">
                            
<script>
  function wireToggles(selectorPrefix) {
    document.querySelectorAll(`.${selectorPrefix}-toggle`).forEach(btn => {
      btn.addEventListener('click', () => {
        const targetId = btn.getAttribute('data-target');
        const panel = document.getElementById(targetId);
        if (!panel) return;
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', expanded ? 'false' : 'true');

        // Update arrow in text
         btn.innerHTML = btn.innerHTML?.replace(/â–¶/g, '').trim() ?? '';
        const rawText = btn.innerHTML.replace(/^[â–¶â–¼]\s*/, '').trim();
        btn.innerHTML = (expanded ? 'â–¶ ' : 'â–¼ ') + rawText;
        // re-append badge if present
        const badge = btn.querySelector('.badge');
        if (badge) btn.appendChild(badge);

        // Toggle visibility
        if (expanded) {
          panel.style.display = 'none';
          btn.closest(`.${selectorPrefix}-container`)?.classList.remove('open');
        } else {
          panel.style.display = 'block';
          btn.closest(`.${selectorPrefix}-container`)?.classList.add('open');
        }
      });
    });
  }
  wireToggles('iteration');
  wireToggles('group-iteration');
</script>

                        </div>
                    </div>
                </div>
            </div>
            <div class="splitter" id="splitter"></div>
            <div class="main-content">
                <div class="test-summary-accordion">
                    <div class="test-summary-header" onclick="toggleSummaryAccordion()">
                        <span class="accordion-arrow" id="summary-accordion-arrow">â–¼</span>
                        <div class="" style="display: flex; justify-content: space-between; width: 100%;">
                            <span class="test-summary-title" style="font-weight:bold; font-size:1.5rem;">
                              Admin Test Flow-Test Suite Execution
                            </span>
                            <div class="response-status error" style="padding-top: 0.5rem;"
                            >Test Result: FAILED</div>
                        </div>
                    </div>
                        <div class="test-summary-content" id="test-summary-content">
                            <div class="summary-stats">
                                <div class="stat">Total Tests: 0</div>
                                <div class="stat passed">Passed: 0</div>
                                <div class="stat failed">Failed: 0</div>
                                <div class="stat skipped">Skipped: 0</div>
                                <div class="stat aborted">Aborted: 0</div>
                                <div class="stat">Duration: 00:00:00.044s</div>
                             
                            </div>
                            
                              <div class="summary-pie-container" id="summary-pie-container">
                                    <canvas id="summaryPieChart" width="180" height="180"></canvas>
                                    <div id="summaryChartLegend" style="padding:3rem"></div>
                                </div>
                        </div>
                    </div>
                    <div class="scrollable-content">
                        <div class="test-details">
                            <div id="request-list" class="request-list-container">
                                <div class="request-list-items"></div>
                            </div>
                            <div id="request-details" class="request-details-container" style="display: none;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <script>    


function toggleSection(id) {
        const section = document.getElementById(id);
        const arrow = document.getElementById(`arrow-${id}`);

        if (!section || !arrow) return;

        const isOpen = section.classList.contains("open");

        if (isOpen) {
          section.classList.remove("open");
          arrow.textContent = "â–¶";
        } else {
          section.classList.add("open");
          arrow.textContent = "â–¼";
        }
      }

      
      function showTestCaseRequests(testCaseId, testResult, testCaseResponse,testCaseName,hookType) {
       
        if (!testCaseResponse) {
          testCaseResponse = window.testCaseResponseMap?.[testCaseId];
        }

     
        document.querySelectorAll(".test-case").forEach((tc) => {
          tc.classList.remove("selected");
        });

        const testCase = document.querySelector(
          `[data-test-id="${testCaseId}"]`,
        );
        if (testCase) {
          testCase.classList.add("selected");
        }

        const testName =
          testCase.querySelector(".main-test-steps > .section-title")?.textContent || "Untitled";
        const mainContent = document.querySelector(".main-content");
        const testDetails = mainContent.querySelector(".test-details");

        const getSectionRequests = (sectionClass) =>
          testCase.querySelectorAll(`.${sectionClass} .request-item`);


            const beforeEachName = Array.from(
    testCase.querySelectorAll(".before-each-responses .main-test-steps .section-title")
  ).map(ele=>ele.textContent?.trim())


  const afterEachName = Array.from(
    testCase.querySelectorAll(".after-each-responses .main-test-steps .section-title")
  ).map(ele=>ele.textContent?.trim())

        const getSectionDetails = (sectionClass) =>
          sectionClass === "main-test-steps"
            ? testCase.querySelectorAll(
                `.test-case-requests > .${sectionClass} .request-details-view`
              )
            : testCase.querySelectorAll(
                `.${sectionClass} .request-details-view`
              );

        const statusClass = (testResult) => {
          if (testResult === "PASSED") {
            return "success";
          }
          if (testResult === "FAILED") {
            return "error";
          }
          if (testResult === "SKIPPED") {
            return "pending";
          }
          return "pending";
        };

          const aggregateSectionResult = (requestNodes) => {
    let hasSkipped = false;
    for (const req of Array.from(requestNodes)) {
      
      const statusElem = req.querySelector(".response-status");
      if (!statusElem) continue;
      const statusText = (statusElem.textContent || "").trim().toUpperCase();
      if (statusText.includes("FAILED")) {
        return "FAILED";
      }
      if (statusText.includes("SKIPPED")) {
        hasSkipped = true;
      }
    }
    return hasSkipped ? "SKIPPED" : "PASSED";
  };

        const buildRequestList = (requests) => {
    
          return Array.from(requests)
            .map((req) => {
            const requestName = req.querySelector(".test-name")?.textContent || "Untitled Request";
              const method =
                req.querySelector(".request-method")?.innerHTML || "GET";
              const url = req.querySelector(".request-url")?.textContent || "";
              const status =
                req.querySelector(".response-status")?.outerHTML || "";
                const responseTime = req.querySelector(".test-time")?.textContent || "";
              const requestId = req.getAttribute("data-request-id");
              const testSize = req.querySelector(".test-size")?.textContent || "";

if(req.querySelector(".response-status").innerHTML!=='SKIPPED')
{
          return `
                <div class="request-list-item" onclick="showRequestDetails('${requestId}')">
                <span class="arrow" id="arrow-${requestId}" style="margin: 0rem 0.5rem 0rem 0.5rem;">â–¶</span>
                    <span class="request-method method-${method.toLowerCase().includes('post') ? 'post' : method.toLowerCase().includes('put') ? 'put' : method.toLowerCase().includes('delete') ? 'delete' : method.toLowerCase().includes('get') ? 'get' : method.toLowerCase().includes('patch') ? 'patch' : ''}">${method}</span>
                   <span class="request-name">${requestName}</span>
                   <span class="request-url">${url}</span>
                    ${status}
                    <span class="response-time">${responseTime} ${testSize}</span>               
                </div>
            `;
}else{
  
  
            return `
                <div class="request-list-item">
                    This test was skipped because a dependency (prior Test Case or a failed hook) failed, preventing execution.         
                </div>
            `;

  }
            })
            .join("");
        };

        const buildSection = (title, requests, id, sectionResult,hookName,testDuration) => {
       const hookIcon = title==="Before Each" ? `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="8.5" cy="8.5" r="7.5" stroke="black"/>
<path d="M3.8999 11.7368V5.29688H5.82139C6.23817 5.29688 6.60592 5.34611 6.92463 5.44458C7.24947 5.54305 7.50383 5.71045 7.68771 5.94678C7.87771 6.17654 7.97271 6.48837 7.97271 6.88225C7.97271 7.18422 7.89916 7.46979 7.75206 7.73894C7.60496 8.00153 7.39964 8.18206 7.13609 8.28053V8.31992C7.46706 8.39869 7.73981 8.56609 7.95433 8.82212C8.17497 9.07157 8.2853 9.41294 8.2853 9.84621C8.2853 10.2729 8.18417 10.6274 7.98191 10.9097C7.78577 11.192 7.51303 11.402 7.16367 11.5399C6.81431 11.6712 6.41898 11.7368 5.97768 11.7368H3.8999ZM4.96637 7.95558H5.72945C6.14623 7.95558 6.44962 7.87352 6.63963 7.7094C6.82963 7.54528 6.92463 7.32537 6.92463 7.04965C6.92463 6.73454 6.82656 6.51134 6.63043 6.38005C6.4343 6.24876 6.1401 6.18311 5.74784 6.18311H4.96637V7.95558ZM4.96637 10.8506H5.86735C6.30865 10.8506 6.64882 10.7653 6.88786 10.5946C7.12689 10.4173 7.24641 10.1482 7.24641 9.78713C7.24641 9.44576 7.12996 9.19959 6.89705 9.0486C6.66414 8.89105 6.32091 8.81227 5.86735 8.81227H4.96637V10.8506Z" fill="black"/>
<path d="M9.3856 11.7368V5.29688H13.0079V6.26188H10.4521V7.90634H12.6126V8.87135H10.4521V10.7718H13.0999V11.7368H9.3856Z" fill="black"/>
</svg>` : title==="After Each" ? `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="8.5" cy="8.5" r="7.5" stroke="black"/>
<path d="M5.82915 8.31009L5.62653 9.09785H7.09769L6.89508 8.31009C6.80111 7.96872 6.71008 7.61751 6.62199 7.25645C6.53977 6.89539 6.45755 6.53761 6.37533 6.18311H6.34009C6.26374 6.54417 6.18152 6.90523 6.09343 7.26629C6.01121 7.62079 5.92311 7.96872 5.82915 8.31009ZM3.8999 11.7369L5.77629 5.29688H6.97436L8.85075 11.7369H7.77601L7.32673 9.99394H5.38868L4.9394 11.7369H3.8999Z" fill="black"/>
<path d="M9.56093 11.7369V5.29688H13.0318V6.26189H10.5828V7.90636H12.653V8.87137H10.5828V10.7719H13.1199V11.7369H9.56093Z" fill="black"/>
</svg>`  :
hookType==="beforeAll" ? `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="8.5" cy="8.5" r="7.5" stroke="black"/>
<path d="M6.2002 11.7978V5.25781H8.2902C8.74353 5.25781 9.14353 5.30781 9.4902 5.40781C9.84353 5.50781 10.1202 5.67781 10.3202 5.91781C10.5269 6.15115 10.6302 6.46781 10.6302 6.86781C10.6302 7.17448 10.5502 7.46448 10.3902 7.73781C10.2302 8.00448 10.0069 8.18781 9.7202 8.28781V8.32781C10.0802 8.40781 10.3769 8.57781 10.6102 8.83781C10.8502 9.09115 10.9702 9.43781 10.9702 9.87781C10.9702 10.3111 10.8602 10.6711 10.6402 10.9578C10.4269 11.2445 10.1302 11.4578 9.7502 11.5978C9.3702 11.7311 8.9402 11.7978 8.4602 11.7978H6.2002ZM7.3602 7.95781H8.1902C8.64353 7.95781 8.97353 7.87448 9.1802 7.70781C9.38686 7.54115 9.4902 7.31781 9.4902 7.03781C9.4902 6.71781 9.38353 6.49115 9.1702 6.35781C8.95686 6.22448 8.63686 6.15781 8.2102 6.15781H7.3602V7.95781ZM7.3602 10.8978H8.3402C8.8202 10.8978 9.1902 10.8111 9.4502 10.6378C9.7102 10.4578 9.8402 10.1845 9.8402 9.81781C9.8402 9.47115 9.71353 9.22115 9.4602 9.06781C9.20686 8.90781 8.83353 8.82781 8.3402 8.82781H7.3602V10.8978Z" fill="black"/>
</svg>` : hookType==="afterAll" ? `<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="8.5" cy="8.5" r="7.5" stroke="black"/>
<path d="M7.88189 8.31781L7.65189 9.11781H9.32189L9.09189 8.31781C8.98523 7.97115 8.88189 7.61448 8.78189 7.24781C8.68856 6.88115 8.59523 6.51781 8.50189 6.15781H8.46189C8.37523 6.52448 8.28189 6.89115 8.18189 7.25781C8.08856 7.61781 7.98856 7.97115 7.88189 8.31781ZM5.69189 11.7978L7.82189 5.25781H9.18189L11.3119 11.7978H10.0919L9.58189 10.0278H7.38189L6.87189 11.7978H5.69189Z" fill="black"/>
</svg>` :  `<svg width="17" height="17" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  <rect x="1" y="1" width="22" height="22" rx="3" stroke="#FF9900" fill="none"/>
  <text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" font-size="12" font-family="Arial, sans-serif" fill="#FF9900" font-weight="bold">TC</text>
</svg>`;
;
          if (!requests.length) return "";
        
          return `
            <div class="request-section">
                <div class="accordion-toggle" onclick="toggleSection('${id}')">
                    <span class="arrow" id="arrow-${id}">â–¶</span><span style="padding-top:0.25rem;">${hookIcon}</span><span class="" style="padding-top:0.2rem;">
                      ${
                      hookName
                      }
                      </span>
                    <!-- NEW: show aggregated sectionResult beside title -->

                    <span class="response-status ${statusClass(sectionResult)}" style="margin-left:8px;">${sectionResult?.toUpperCase()}</span>
                <span class="duration" style="margin-left: auto; ">${testDuration ? `Duration: ${testDuration}` : ""}</span>
                    </div>
                <div class="accordion-content" id="${id}">
                    <div class="request-list-items">
                        ${buildRequestList(requests)}
                    </div>
                </div>
            </div>
        `;
        };



  const testStepRequests = getSectionRequests("test-case-requests > .main-test-steps");



  const testStepDetails = getSectionDetails("main-test-steps");


const beforeEachRequests = Array.from(
  testCase.querySelectorAll(".before-each-responses .main-test-steps")
).flatMap(stepsBlock =>
  Array.from(stepsBlock.querySelectorAll(".request-item"))
);

   const beforeEachDurations = Array.from(
                    testCase.querySelectorAll(
                        ".before-each-responses .main-test-steps .test-duration",
                    ),
                ).map((durationElement) => durationElement.textContent.trim());


const beforeEachDetails = Array.from(
  testCase.querySelectorAll(".before-each-responses .main-test-steps")
).flatMap(stepsBlock =>
  Array.from(stepsBlock.querySelectorAll(".request-details-view"))
);


const afterEachRequests = Array.from(
  testCase.querySelectorAll(".after-each-responses .main-test-steps")
).flatMap(stepsBlock =>
  Array.from(stepsBlock.querySelectorAll(".request-item"))
);

const afterEachDurations = Array.from(
    testCase.querySelectorAll(
        ".after-each-responses .main-test-steps .test-duration",
    ),
).map((durationElement) => durationElement.textContent.trim());

const afterEachDetails = Array.from(
  testCase.querySelectorAll(".after-each-responses .main-test-steps")
).flatMap(stepsBlock =>
  Array.from(stepsBlock.querySelectorAll(".request-details-view"))
);

const testStepDuration = Array.from(
    testCase.querySelectorAll(
        ".test-case-requests > .main-test-steps .request-item > .test-duration",
    ),
).map((durationElement) => durationElement.textContent.trim());
     
        const beforeEachResult = aggregateSectionResult(beforeEachRequests);
        const testCaseResultSection = aggregateSectionResult(testStepRequests);
        const afterEachResult = aggregateSectionResult(afterEachRequests);


        testDetails.innerHTML = `
        <div class="test-summary" style="display:flex;
        flex-direction: row;
        justify-content: flex-start;
        ">
            <span style="font-size: x-large; font-weight: 700">Execution Details of ${testCaseName}
        </div>
        <div class="request-list-container">
           ${beforeEachRequests.length>0 && beforeEachName.length>0  ? beforeEachRequests.map((req,i)=>buildSection("Before Each", [req], `before-each-${i}`, beforeEachResult, beforeEachName[i], beforeEachDurations[i])).join('') : ""  }
            ${testStepRequests.length>0 ? buildSection("Test Case", testStepRequests, "test-case", testCaseResultSection, testCaseName, testStepDuration[0]) : ""}
       ${afterEachRequests.length>0 && afterEachName.length>0 ? afterEachRequests.map((req,i)=>buildSection("After Each", [req], `after-each-${i}`, afterEachResult, afterEachName[i],afterEachDurations[i])).join('') : ""}
        </div>
        <div class="request-details-container" style="display: none;">
            ${[...beforeEachDetails, ...testStepDetails, ...afterEachDetails]
              .map((detail) => detail.outerHTML)
              .join("")}
        </div>
   `;
      }

function switchPrimaryTab(button, type, requestId) {
  const container = button.closest('.request-details-content');
  const requestTab = container.querySelector(`[data-request-id="${requestId}"]`);
  const responseTab = container.querySelector(`[data-response-id="${requestId}"]`);

  // Deactivate all buttons
  container.querySelectorAll('.primary-tabs .tab-button').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');

  // Show correct tab
  requestTab.classList.toggle('active', type === 'request');
  responseTab.classList.toggle('active', type === 'response');
}

function switchSecondaryTab(button, target, requestId) {
  const container = button.closest('.tab-pane');
  const group = target.startsWith('req') ? 'request' : 'response';

  const selector = `[data-inner-${group}-id="${requestId}"]`;
  container.querySelectorAll('.secondary-tabs .tab-button').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');

  container.querySelectorAll(`.inner-tab-pane${selector}`).forEach(pane => pane.classList.remove('active'));
  container.querySelector(`.${target}${selector}`).classList.add('active');
}
     
function showRequestDetails(requestId) {
  const requestItem = document.querySelector(
    `.request-list-item[onclick*="${requestId}"]`
  );
  const arrow = document.getElementById(`arrow-${requestId}`);

  const requestDetailsContainer = document.querySelector(`.request-details-container`);

  if (!requestItem || !requestDetailsContainer) return;

  // ðŸ”Ž Try to find the request detail already inserted under the requestItem
  let existingRequestDetail = requestItem.parentElement.querySelector(
    `.request-details-view[data-request-details-id="${requestId}"]`
  );

  if (!existingRequestDetail) {
    // ðŸ†• Not found under requestItem â†’ find original from container and clone it
    const originalRequestDetail = requestDetailsContainer.querySelector(
      `.request-details-view[data-request-details-id="${requestId}"]`
    );

    if (!originalRequestDetail) return;

    // ðŸ“¦ Clone the element (so we don't move the original out)
    const clonedDetail = originalRequestDetail.cloneNode(true);
    clonedDetail.style.display = "block";
    clonedDetail.classList.add("expanded");
 arrow.textContent = "â–¼";
    // âœ… Insert below the clicked request item
    requestItem.parentElement.insertBefore(clonedDetail, requestItem.nextSibling);
  } else {
    // âœ… Already present â†’ toggle expansion
    const isExpanded = existingRequestDetail.classList.contains("expanded");

    if (isExpanded) {
      existingRequestDetail.style.display = "none";
      existingRequestDetail.classList.remove("expanded");
      arrow.textContent = "â–¶";
    } else {
      existingRequestDetail.style.display = "block";
      existingRequestDetail.classList.add("expanded");
      arrow.textContent = "â–¼";
    }
  }

  // ðŸŸ¡ Ensure accordion section is open
  const accordionContent = requestItem.closest(".accordion-content");
  if (accordionContent && !accordionContent.classList.contains("open")) {
    accordionContent.classList.add("open");

    const parentId = accordionContent.id;
    const arrow = document.getElementById(`arrow-${parentId}`);
    if (arrow) arrow.textContent = "â–¼";
  }
}

            function toggleRequestDetails(requestId) {
                const requestDetails = document.querySelector(`[data-request-details-id="${requestId}"]`);
                if (requestDetails) {
                    requestDetails.classList.toggle('expanded');
                    if (!requestDetails.classList.contains('expanded')) {
                        const requestListContainer = document.querySelector('.request-list-container');
                        const requestDetailsContainer = document.querySelector('.request-details-container');
                        requestListContainer.style.display = 'block';
                        requestDetailsContainer.style.display = 'none';
                    }
                }
            }

            function initializeTestTree() {
                // Test groups expansion/collapse
                document.querySelectorAll('.test-group-header').forEach(header => {
                    header.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const group = header.closest('.test-group');
                        group.classList.toggle('expanded');
                        const icon = header.querySelector('.test-group-icon');
                        icon.textContent = group.classList.contains('expanded') ?  'â–¼' :'â–¶';
                    });
                });
            }

            /* Initialize splitter */
            function initializeSplitter() {
                const splitter = document.getElementById('splitter');
                const sidebar = document.querySelector('.sidebar');
                let isResizing = false;
                let startX;
                let startWidth;

                splitter.addEventListener('mousedown', (e) => {
                    isResizing = true;
                    startX = e.pageX;
                    startWidth = sidebar.offsetWidth;

                    document.addEventListener('mousemove', handleMouseMove);
                    document.addEventListener('mouseup', () => {
                        isResizing = false;
                        document.removeEventListener('mousemove', handleMouseMove);
                    });
                });

                function handleMouseMove(e) {
                    if (!isResizing) return;
                    const width = startWidth + (e.pageX - startX);
                    if (width >= 200 && width <= window.innerWidth * 0.5) {
                        sidebar.style.width = width + 'px';
                    }
                }
            }

            function filterTests() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const showPassed = document.getElementById('filterPassed').checked;
    const showFailed = document.getElementById('filterFailed').checked;
    const showSkipped = document.getElementById('filterSkipped').checked;

    // Filter test cases
    document.querySelectorAll('.test-case').forEach(testCase => {
        const testName = testCase.querySelector('.test-case-name')?.textContent.toLowerCase() || '';

        const status = testCase.classList.contains('PASSED') ? 'passed' :
                       testCase.classList.contains('FAILED') ? 'failed' :
                       'skipped';

        const matchesSearch = searchTerm === '' || testName.includes(searchTerm);
        const matchesStatus = (status === 'passed' && showPassed) ||
                              (status === 'failed' && showFailed) ||
                              (status === 'skipped' && showSkipped);

        // Visible only if BOTH match
        const isVisible = matchesSearch && matchesStatus;

        testCase.classList.toggle('filtered', !isVisible);
    });

    // Filter test groups
    document.querySelectorAll('.test-group').forEach(group => {
        const groupName = group.querySelector('.test-group-name')?.textContent.toLowerCase() || '';
        const matchesSearch = searchTerm === '' || groupName.includes(searchTerm);

        // Check if group has any *visible* children
        const hasVisibleChildren = Array.from(group.querySelectorAll(':scope > .test-case, :scope > .test-group'))
            .some(child => !child.classList.contains('filtered'));

        // Hide group if it doesn't match search AND has no visible children
        const isVisible = matchesSearch || hasVisibleChildren;
        group.classList.toggle('filtered', !isVisible);

        // Expand groups with visible children
        if (isVisible) {
            group.classList.add('expanded');
            const icon = group.querySelector('.test-group-icon');
            if (icon) icon.textContent = 'â–¼ ';
        }
    });
}

            function filterRequests(testCaseId) {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase();
                const requestListItems = document.querySelectorAll('.request-list-item');
                
                requestListItems.forEach(item => {
                    const method = item.querySelector('.request-method').textContent.toLowerCase();
                    const url = item.querySelector('.request-name').textContent.toLowerCase();
                    const status = item.querySelector('.response-status').textContent.toLowerCase();
                    
                    const matchesSearch = method.includes(searchTerm) || 
                                       url.includes(searchTerm) || 
                                       status.includes(searchTerm);
                    
                    item.style.display = matchesSearch ? 'flex' : 'none';
                });
            }

            /* Initialize the report */
            document.addEventListener('DOMContentLoaded', () => {
                initializeTestTree();
                initializeSplitter();

                // Initialize search and filter functionality
                const searchInput = document.getElementById('searchInput');
                const filterCheckboxes = document.querySelectorAll('.filter-options input');

                searchInput.addEventListener('input', () => {
                    filterTests();
                    filterRequests();
                });

                filterCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', filterTests);
                });
            });
        </script>
            <script>
                const total = 0;
                const passed = 0;
                const failed = 0;
                const skipped = 0;
                const aborted = 0;
                const ctx = document.getElementById('summaryPieChart').getContext('2d');

                const chartInstance = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['Passed', 'Failed', 'Skipped', 'Aborted'],
                        datasets: [{
                            data: [passed, failed, skipped, aborted],
                            backgroundColor: [
                                '#81c784', // green
                                '#e57373', // red
                                'gray', // purple
                                '#FEF3C7' 
                            ],
                            borderColor: [
                                '#388e3c',
                                '#b71c1c',
                                'gray',
                                '#FEF3C7'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: false,
                        plugins: {
                            legend: { display: false },
                            title: {
                                display: true,
                                text: 'Test Results Summary'
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const label = context.label || '';
                                        const value = context.parsed || 0;
                                        const percent = total ? ((value / total) * 100).toFixed(1) : 0;
                                        return `${label}: ${value} (${percent}%)`;
                                    }
                                }
                            }
                        }
                    },
                    plugins: [{
                        id: 'htmlLegend',
                        afterUpdate(chart) {
                            const legendContainer = document.getElementById('summaryChartLegend');
                            legendContainer.innerHTML = chart.data.labels.map((label, i) => {
                                const bg = chart.data.datasets[0].backgroundColor[i];
                                const value = chart.data.datasets[0].data[i];
                                const percent = total ? ((value / total) * 100).toFixed(1) : 0;
                                return `
                                    <li>
                                        <span style="background-color:${bg}"></span>
                                        ${label}: ${value} (${percent}%)
                                    </li>
                                `;
                            }).join('');
                            legendContainer.innerHTML = `<ul>${legendContainer.innerHTML}</ul>`;
                        }
                    }]
                });

                function toggleSummaryAccordion() {
                    const content = document.getElementById('test-summary-content');
                    const arrow = document.getElementById('summary-accordion-arrow');
                    if (content.style.display === 'none') {
                        content.style.display = '';
                        arrow.textContent = 'â–¼';
                    } else {
                        content.style.display = 'none';
                        arrow.textContent = 'â–¶';
                    }
                }
            </script>
        </body>
</html>